<!DOCTYPE html>
<html>
  <head>
  	<!-- <link rel="stylesheet" href="style.css"> -->
    <style>
  	.bar
  	{
  		fill: steelblue;
  	}

   	.bar:hover
  	{
  		fill: pink;
  	}

    .text
    {
      fill: pink;
      font-family: "Times New Roman";
      font-size: 10px;
    }

  	.axis text
  	{
  		fill: pink;
      font-size: 10px;
      font-family: "Times New Roman";
  	}

  	.axis path,
  	.axis line
  	{
      fill: none;
      stroke: black;
      shape-rendering: crispEdges;
  	}
  	</style>
  		<meta charset="utf-8">
        <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <body>
  	<script type="text/javascript">
  		// add text to html page
  		d3.select("head").append("title").text("Barchart");
  		d3.select("body").append("p").text("Pernille Deijlen");
  		d3.select("body").append("p").text("10747354");
  		d3.select("body").append("h1").text("Balance of Payments");
  		d3.select("body").append("p").text("This dataset contains data on the Balance of Payments (BoP) of the Netherlands from 2000 until 2016. The barchart below shows the BoP (measured in US dollars) for the mentioned years.");

      var body = d3.select("body")
      
      var barPadding = 1
      var padding = -50
      var margin = {top: 20, right: 20, bottom: 70, left: 70}
      var width = 600 - margin.left - margin.right
      var height = 400 - margin.top - margin.bottom
      
      // create SVG element
      var svg = body.append("svg")
        .attr("height", height + margin.top + margin.bottom)
        .attr("width", width + margin.left + margin.right);
        
      var g = svg.append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
      
  		// loading the json data
  		d3.json("dutchBoP.json", function(error, data)
      {
  			if (error)
  			{
  				return console.warn(error);
  			}
  	
        // creating rects
        svg.selectAll("rect")
          .data(data)
          .enter()
          .append("rect")
            .attr("class", "bar")
            .attr("height", function(d) {return (d.BoP / 300000000)})
            .attr("width", width / data.length - barPadding)
            .attr("x", function(d, i) {return i * (width / data.length)})
            .attr("y", function(d) {return height - (d.BoP / 300000000)})

        // alleen showen als je eroverheen hovert
        // svg.selectAll("text")
        //   .data(data)
        //   .enter()
        //   .append("text")
        //   .text(function(d) {return d.BoP})
        //     .attr("class", "text")
        //     .attr("x", function(d, i) {return i * (width / data.length)})
        //     .attr("y", function(d, i) {return height - (d.BoP / 300000000)});

        var x = d3.scaleBand()  //discrete data:the years
          .domain(function(d) {return d.year})
          .range([0, width])
          .paddingInner(0,1);
        var y = d3.scaleLinear()
          .domain([0, d3.max(function(d) {return d.BoP; })])
          .range([height, 0])
          .nice();

        // define X and Y axis
        var xAxis = d3.axisBottom()
          .scale(x);
          //.ticks(5);

        var yAxis = d3.axisLeft()
          .scale(y);
          //.ticks(5);

        // create X and Y axis
        g.append("g")
          .attr("class", "axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

        g.append("g")
          .attr("class", "axis")
          .attr("transform", "translate(" + padding + ",0)")
          .call(yAxis);

        g.append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end")
          .text("US dollars")

      });

  	</script>
  </body>
</html>